<div class="drawer">
  <input id="my-drawer-2" type="checkbox" class="drawer-toggle" />

  <!--  CONTENIDO (Navbar + Main) -->
  <div class="drawer-content flex flex-col">

    <!-- Navbar superior -->
    <div class="navbar bg-base-300 w-full">
      
      <!-- 1. Bot贸n de men煤 m贸vil -->
      <div class="flex-none lg:hidden">
        <label for="my-drawer-2" aria-label="open sidebar" class="btn btn-square btn-ghost">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"
            class="inline-block h-6 w-6 stroke-current">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
          </svg>
        </label>
      </div>

      <!-- 2. T铆tulo -->
      <div class="mx-2 flex-1 px-2 font-bold">
        <a routerLink="/" class="cursor-pointer">David Villa</a>
      </div>

      <!-- 3. Men煤 Escritorio -->
      <div class="hidden flex-none lg:flex items-center space-x-4">
        <ul class="menu menu-horizontal px-1">
          
          <!-- Enlace ESTILOS (Condicional) -->
          <li>
            @if (currentUser()) {
              <!-- Habilitado si hay usuario -->
              <a routerLink="/estilos" routerLinkActive="bg-primary text-primary-content"
                [routerLinkActiveOptions]="{ exact: true }">Estilos</a>
            } @else {
              <!--  CORRECCIN: Deshabilitado visualmente si no hay usuario -->
              <span class="text-gray-400 cursor-not-allowed" title="Inicia sesi贸n para acceder">Estilos </span>
            }
          </li>

          <!-- Enlace COMPONENTES -->
          <li>
            <a routerLink="/componentes" routerLinkActive="bg-primary text-primary-content"
              [routerLinkActiveOptions]="{ exact: false }">Componentes</a>
          </li>

          <!-- Enlace SIMPSONS (Solo visible si hay usuario) -->
          @if (currentUser()) {
            <li>
              <a routerLink="/simpsons" routerLinkActive="bg-primary text-primary-content"
                [routerLinkActiveOptions]="{ exact: false }">Simpsons</a>
            </li>
          }

          <!-- Enlace CONTACTO -->
          <li>
            <a routerLink="/contacto" routerLinkActive="bg-primary text-primary-content"
              [routerLinkActiveOptions]="{ exact: true }">Contacto</a>
          </li>
        </ul>

        <!-- Theme Switcher -->
        <app-theme-switcher></app-theme-switcher>
      </div>

      <!-- 4. Avatar de Usuario -->
      <div class="flex-none ml-2">
        @if (currentUser()) {
          <div class="dropdown dropdown-end">
            <label tabindex="0" class="btn btn-ghost btn-circle avatar">
              <div class="w-10 rounded-full bg-primary text-primary-content flex items-center justify-center">
                <span class="text-lg font-bold">{{ currentUser()?.email?.charAt(0)?.toUpperCase() }}</span>
              </div>
            </label>
            <ul tabindex="0" class="mt-3 z-1 p-2 shadow menu menu-sm dropdown-content bg-base-100 rounded-box w-52">
              <li class="menu-title">
                <span class="truncate block">{{ currentUser()?.email }}</span>
              </li>
              <li>
                <button (click)="logout()" class="text-error">
                   Cerrar Sesi贸n
                </button>
              </li>
            </ul>
          </div>
        } @else {
          <a routerLink="/login" class="btn btn-primary btn-sm ml-2">
            Ingresar
          </a>
        }
      </div>

    </div>
    <!-- Fin Navbar -->

    <main class="p-6">
      <ng-content></ng-content>
    </main>
  </div>

  <!--  DRAWER LATERAL (M贸vil) -->
  <div class="drawer-side z-50">
    <label for="my-drawer-2" aria-label="close sidebar" class="drawer-overlay"></label>

    <div class="menu bg-base-200 min-h-full w-80 p-4 flex flex-col justify-between">
      <ul>
        <li class="mb-4 font-bold text-lg px-4">Men煤</li>
        <li><a routerLink="/dashboard">Dashboard</a></li>
        <li><a routerLink="/configuracion">Configuraci贸n</a></li>
        <li><a routerLink="/ayuda">Ayuda</a></li>
        
        <div class="divider">Navegaci贸n</div>
        
        <!-- ESTILOS (M贸vil) -->
        <li>
          @if (currentUser()) {
            <a routerLink="/estilos">Estilos</a>
          } @else {
            <span class="text-gray-400">Estilos </span>
          }
        </li>

        <!-- COMPONENTES -->
        <li><a routerLink="/componentes">Componentes</a></li>

        <!-- SIMPSONS (M贸vil) -->
        @if (currentUser()) {
          <li><a routerLink="/simpsons">Simpsons</a></li>
        }

        <li><a routerLink="/contacto">Contacto</a></li>
      </ul>

      <div class="p-4 border-t border-base-300 gap-2 flex flex-col">
        <app-theme-switcher></app-theme-switcher>
        
        @if (currentUser()) {
          <button (click)="logout()" class="btn btn-outline btn-error btn-sm w-full mt-2">
            Cerrar Sesi贸n
          </button>
        } @else {
           <a routerLink="/login" class="btn btn-primary btn-sm w-full mt-2">
            Iniciar Sesi贸n
          </a>
        }
      </div>
    </div>
  </div>
</div>